# –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å—Ä–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–¶–µ–ª–µ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:** –¥–æ 100 –∫–ª—é—á–µ–π

---

## üìã –û–±–∑–æ—Ä

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å—Ä–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞:
- **–£–ª—É—á—à–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –¥–æ –∏—Ö –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- **–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞** - —É–ø—Ä–æ—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

–≠—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ **–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã, –Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞—é—Ç:
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–æ–≤

### üîç –ß—Ç–æ —ç—Ç–æ?

–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–ª—É—á–µ–Ω–∏—è –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É.

### üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

**–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 100 –∫–ª—é—á–µ–π —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Å–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É
- –°–ª–æ–∂–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º:**
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ 90% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—Ä–∞–Ω–µ–µ
- ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–æ–≤

### üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:**
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/system/ports` - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Ä—Ç–∞—Ö
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö/—Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –ø–æ—Ä—Ç–æ–≤

**–ß–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå –ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
- ‚ùå –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É
- ‚ùå –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
- ‚ùå –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

### üõ†Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 1.1 –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—Ä—Ç–æ–≤

**–§–∞–π–ª:** `api.py`

**–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç:**

```python
@app.get("/api/system/ports/usage")
async def get_ports_usage(api_key: str = Depends(verify_api_key)):
    """–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–æ—Ä—Ç–æ–≤ —Å –∞–ª–µ—Ä—Ç–∞–º–∏"""
    try:
        port_assignments = get_all_port_assignments()
        used_count = port_manager.get_used_ports_count()
        available_count = port_manager.get_available_ports_count()
        total_ports = port_manager.max_ports
        
        usage_percent = (used_count / total_ports) * 100 if total_ports > 0 else 0
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –∞–ª–µ—Ä—Ç–∞
        alert_level = "ok"
        if usage_percent >= 95:
            alert_level = "critical"  # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å - –ø–æ—á—Ç–∏ –≤—Å–µ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
        elif usage_percent >= 90:
            alert_level = "warning"   # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ - –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –ª–∏–º–∏—Ç—É
        elif usage_percent >= 80:
            alert_level = "info"      # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - –≤—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
        
        return {
            "used_ports": used_count,
            "available_ports": available_count,
            "total_ports": total_ports,
            "usage_percent": round(usage_percent, 2),
            "alert_level": alert_level,
            "alert_message": _get_alert_message(alert_level, usage_percent, available_count),
            "port_range": f"{port_manager.port_range_start}-{port_manager.port_range_end}",
            "recommendations": _get_port_recommendations(usage_percent, available_count),
            "timestamp": int(time.time())
        }
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Failed to get ports usage: {str(e)}")

def _get_alert_message(alert_level: str, usage_percent: float, available_count: int) -> Optional[str]:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –∞–ª–µ—Ä—Ç–∞"""
    if alert_level == "critical":
        return f"–ö–†–ò–¢–ò–ß–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ {usage_percent:.1f}% –ø–æ—Ä—Ç–æ–≤. –û—Å—Ç–∞–ª–æ—Å—å {available_count} —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –ø–æ—Ä—Ç–æ–≤."
    elif alert_level == "warning":
        return f"–í–ù–ò–ú–ê–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ {usage_percent:.1f}% –ø–æ—Ä—Ç–æ–≤. –û—Å—Ç–∞–ª–æ—Å—å {available_count} —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è."
    elif alert_level == "info":
        return f"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ {usage_percent:.1f}% –ø–æ—Ä—Ç–æ–≤. –û—Å—Ç–∞–ª–æ—Å—å {available_count} —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤."
    return None

def _get_port_recommendations(usage_percent: float, available_count: int) -> List[str]:
    """–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Ä—Ç–æ–≤"""
    recommendations = []
    
    if usage_percent >= 90:
        recommendations.append("–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –ø–æ—Ä—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10001-10200)")
        recommendations.append("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–ª—é—á–µ–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è")
    
    if available_count < 10:
        recommendations.append("–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –º–∞–ª–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏–º–∏—Ç–µ –º–µ—Ä—ã.")
    
    if usage_percent >= 80:
        recommendations.append("–ù–∞—á–Ω–∏—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã")
        recommendations.append("–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–π")
    
    return recommendations
```

#### 1.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ health check

**–û–±–Ω–æ–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health`:**

```python
@app.get("/health")
async def health_check():
    """Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã"""
    try:
        # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
        
        # –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ä—Ç–∞—Ö
        used_ports = port_manager.get_used_ports_count()
        total_ports = port_manager.max_ports
        ports_usage_percent = (used_ports / total_ports) * 100 if total_ports > 0 else 0
        
        return {
            "status": "healthy",
            "timestamp": datetime.now().isoformat(),
            "version": "2.3.4",
            "services": {
                "xray": xray_status,
                "api": api_status,
                "nginx": nginx_status
            },
            "resources": {
                "memory_usage_percent": memory.percent,
                "memory_available_mb": round(memory.available / 1024 / 1024, 2),
                "disk_usage_percent": disk.percent,
                "disk_free_gb": round(disk.free / 1024 / 1024 / 1024, 2),
                "cpu_usage_percent": psutil.cpu_percent(interval=1)
            },
            "ports": {
                "used": used_ports,
                "total": total_ports,
                "available": total_ports - used_ports,
                "usage_percent": round(ports_usage_percent, 2),
                "alert": ports_usage_percent >= 90
            },
            "uptime_seconds": int(time.time() - psutil.boot_time())
        }
    except Exception as e:
        return {
            "status": "unhealthy",
            "timestamp": datetime.now().isoformat(),
            "error": str(e)
        }
```

#### 1.3 –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–æ—Ä—Ç–æ–≤:**

```bash
curl -H "X-API-Key: your-api-key" \
     https://server:8000/api/system/ports/usage
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "used_ports": 85,
  "available_ports": 15,
  "total_ports": 100,
  "usage_percent": 85.0,
  "alert_level": "info",
  "alert_message": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ 85.0% –ø–æ—Ä—Ç–æ–≤. –û—Å—Ç–∞–ª–æ—Å—å 15 —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤.",
  "port_range": "10001-10100",
  "recommendations": [
    "–ù–∞—á–Ω–∏—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã",
    "–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–π"
  ],
  "timestamp": 1700736000
}
```

### üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –¥–æ –∏—Ö –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è
2. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—Ä–∞–Ω–µ–µ
3. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API workers

### üîç –ß—Ç–æ —ç—Ç–æ?

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤. Workers - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—Ö–æ–¥—è—â–∏–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

### üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

**–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ü—Ä–∏ 100 –∫–ª—é—á–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞–¥–µ—Ä–∂–∫–∞–º
- –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –≤–ø—É—Å—Ç—É—é

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

### üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:**
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `VPN_WORKERS`
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2 workers
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ max requests per worker: 500

**–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ö†Ô∏è –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 2 workers (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 100 –∫–ª—é—á–µ–π)
- ‚ö†Ô∏è –ù–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É workers
- ‚ö†Ô∏è –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ workers

### üõ†Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 2.1 –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ workers

**–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:**
```
workers = (CPU cores √ó 2) + 1
```

**–î–ª—è 100 –∫–ª—é—á–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
- –ú–∏–Ω–∏–º—É–º: 4 workers
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: 4-8 workers (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç CPU)
- –ú–∞–∫—Å–∏–º—É–º: –Ω–µ –±–æ–ª–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ CPU cores √ó 2

#### 2.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ .env —Ñ–∞–π–ª–µ

**–§–∞–π–ª:** `/root/vpn-server/.env`

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```bash
VPN_WORKERS=2
VPN_WORKER_MAX_REQUESTS=500
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è 100 –∫–ª—é—á–µ–π:**
```bash
# –î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å 2-4 CPU cores
VPN_WORKERS=4
VPN_WORKER_MAX_REQUESTS=500

# –î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å 4+ CPU cores
VPN_WORKERS=6
VPN_WORKER_MAX_REQUESTS=500
```

#### 2.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
#!/bin/bash
# check_workers_config.sh

echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API workers ==="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞
if [ -f "/root/vpn-server/.env" ]; then
    echo "üìÑ –§–∞–π–ª .env –Ω–∞–π–¥–µ–Ω"
    VPN_WORKERS=$(grep "^VPN_WORKERS=" /root/vpn-server/.env | cut -d'=' -f2)
    VPN_MAX_REQUESTS=$(grep "^VPN_WORKER_MAX_REQUESTS=" /root/vpn-server/.env | cut -d'=' -f2)
    
    echo "  VPN_WORKERS: ${VPN_WORKERS:-–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2)}"
    echo "  VPN_WORKER_MAX_REQUESTS: ${VPN_MAX_REQUESTS:-–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 500)}"
else
    echo "‚ö†Ô∏è  –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω"
fi

echo ""
echo "=== –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ ==="
CPU_CORES=$(nproc)
echo "  CPU cores: $CPU_CORES"

# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
RECOMMENDED_WORKERS=$((CPU_CORES * 2 + 1))
if [ $RECOMMENDED_WORKERS -gt 8 ]; then
    RECOMMENDED_WORKERS=8  # –ú–∞–∫—Å–∏–º—É–º 8 –¥–ª—è API
fi

echo "  –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers: $RECOMMENDED_WORKERS"
echo "  –ú–∏–Ω–∏–º—É–º –¥–ª—è 100 –∫–ª—é—á–µ–π: 4"

echo ""
echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ==="
WORKER_COUNT=$(ps aux | grep "uvicorn api:app" | grep -v grep | wc -l)
echo "  –ó–∞–ø—É—â–µ–Ω–Ω—ã—Ö worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: $WORKER_COUNT"

echo ""
echo "=== –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ==="
if [ -z "$VPN_WORKERS" ] || [ "$VPN_WORKERS" -lt 4 ]; then
    echo "‚ö†Ô∏è  –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å VPN_WORKERS=4 –∏–ª–∏ –≤—ã—à–µ –¥–ª—è 100 –∫–ª—é—á–µ–π"
    echo "   –î–æ–±–∞–≤—å—Ç–µ –≤ /root/vpn-server/.env:"
    echo "   VPN_WORKERS=4"
else
    echo "‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è workers –≤—ã–≥–ª—è–¥–∏—Ç —Ö–æ—Ä–æ—à–æ"
fi
```

#### 2.4 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ workers

**–î–æ–±–∞–≤–∏—Ç—å –≤ API —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

```python
@app.get("/api/system/workers/status")
async def get_workers_status(api_key: str = Depends(verify_api_key)):
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å API workers"""
    try:
        import subprocess
        import os
        
        # –ü–æ–ª—É—á–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö worker –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
        result = subprocess.run(
            ['pgrep', '-f', 'uvicorn api:app'],
            capture_output=True,
            text=True
        )
        running_workers = len(result.stdout.strip().split('\n')) if result.stdout.strip() else 0
        
        # –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ .env
        env_workers = int(os.getenv("VPN_WORKERS", "2"))
        env_max_requests = int(os.getenv("VPN_WORKER_MAX_REQUESTS", "500"))
        
        # –ü–æ–ª—É—á–∞–µ–º CPU cores
        cpu_cores = os.cpu_count() or 1
        
        # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
        recommended_workers = min((cpu_cores * 2) + 1, 8)
        if recommended_workers < 4:
            recommended_workers = 4  # –ú–∏–Ω–∏–º—É–º 4 –¥–ª—è 100 –∫–ª—é—á–µ–π
        
        return {
            "configured_workers": env_workers,
            "running_workers": running_workers,
            "max_requests_per_worker": env_max_requests,
            "cpu_cores": cpu_cores,
            "recommended_workers": recommended_workers,
            "status": "ok" if running_workers == env_workers else "mismatch",
            "recommendation": _get_workers_recommendation(env_workers, recommended_workers),
            "timestamp": int(time.time())
        }
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"Failed to get workers status: {str(e)}")

def _get_workers_recommendation(configured: int, recommended: int) -> str:
    """–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ workers"""
    if configured < 4:
        return f"‚ö†Ô∏è –î–ª—è 100 –∫–ª—é—á–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 4 workers. –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: {configured}. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ: {recommended}"
    elif configured < recommended:
        return f"üí° –î–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è {recommended} workers. –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: {configured}"
    elif configured > recommended * 1.5:
        return f"‚ö†Ô∏è –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ workers ({configured}) –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ: {recommended}"
    else:
        return f"‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è workers –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ ({configured})"
```

#### 2.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ systemd –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo systemctl show vpn-api.service | grep Environment

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .env
sudo systemctl daemon-reload
sudo systemctl restart vpn-api
```

#### 2.6 –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ workers:**

```bash
curl -H "X-API-Key: your-api-key" \
     https://server:8000/api/system/workers/status
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "configured_workers": 2,
  "running_workers": 2,
  "max_requests_per_worker": 500,
  "cpu_cores": 2,
  "recommended_workers": 4,
  "status": "ok",
  "recommendation": "‚ö†Ô∏è –î–ª—è 100 –∫–ª—é—á–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 4 workers. –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 2. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ: 4",
  "timestamp": 1700736000
}
```

### üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ª—É—á—à–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ CPU
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
3. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - —Å–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏

---

## 3. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üîç –ß—Ç–æ —ç—Ç–æ?

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ VPN –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ iOS –∏ Android, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è v2raytun.

### üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

**–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –∑–Ω–∞—é—Ç, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—ã
- –ú–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏–∑-–∑–∞ –Ω–µ–ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:**
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- ‚úÖ –õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:**
- ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ README
- ‚úÖ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

**–ß–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è iOS
- ‚ùå –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Android (v2raytun)
- ‚ùå –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚ùå –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚ùå FAQ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üõ†Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 3.1 –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –¥–ª—è Android (v2raytun)

**–§–∞–π–ª:** `/root/vpn-server/USER_GUIDE_ANDROID_V2RAYTUN.md`

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**

```markdown
# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ v2raytun –Ω–∞ Android

## üì± –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Android 5.0 –∏–ª–∏ –≤—ã—à–µ
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ v2raytun (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–∑ Google Play –∏–ª–∏ APK)
- VLESS URL –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üì• –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ –≤–∞—à–µ–º Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ VLESS URL (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `vless://`)

**–ü—Ä–∏–º–µ—Ä URL:**
```
vless://uuid@server.com:10001?type=tcp&security=reality&encryption=none&fp=chrome&pbk=public_key&sid=short_id&sni=www.microsoft.com#KeyName
```

## üîß –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ v2raytun

### –í–∞—Ä–∏–∞–Ω—Ç A: –ò–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ URL

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **v2raytun**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É **"+"** (–¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä)
3. –í—ã–±–µ—Ä–∏—Ç–µ **"–ò–º–ø–æ—Ä—Ç –∏–∑ URL"**
4. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π VLESS URL
5. –ù–∞–∂–º–∏—Ç–µ **"–ò–º–ø–æ—Ä—Ç"**

### –í–∞—Ä–∏–∞–Ω—Ç B: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **v2raytun**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É **"+"** (–¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä)
3. –í—ã–±–µ—Ä–∏—Ç–µ **"–†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **–¢–∏–ø:** VLESS
- **–ê–¥—Ä–µ—Å:** `server.com` (–∏–ª–∏ IP –∞–¥—Ä–µ—Å)
- **–ü–æ—Ä—Ç:** `10001` (–∏–∑ –≤–∞—à–µ–≥–æ URL)
- **UUID:** `uuid` (–∏–∑ –≤–∞—à–µ–≥–æ URL)
- **–ò–º—è:** `KeyName` (–∏–∑ –≤–∞—à–µ–≥–æ URL)

**Reality –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **Public Key:** `public_key` (–∏–∑ –≤–∞—à–µ–≥–æ URL, –ø–∞—Ä–∞–º–µ—Ç—Ä `pbk=`)
- **Short ID:** `short_id` (–∏–∑ –≤–∞—à–µ–≥–æ URL, –ø–∞—Ä–∞–º–µ—Ç—Ä `sid=`)
- **SNI:** `www.microsoft.com` (–∏–∑ –≤–∞—à–µ–≥–æ URL, –ø–∞—Ä–∞–º–µ—Ç—Ä `sni=`)
- **Fingerprint:** `chrome` (–∏–∑ –≤–∞—à–µ–≥–æ URL, –ø–∞—Ä–∞–º–µ—Ç—Ä `fp=`)

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –µ–≥–æ –≤ —Å–ø–∏—Å–∫–µ
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ VPN
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è **"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ"**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

## üîç –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `fp=chrome` (–Ω–µ `fp=randomized`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `sid` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–æ–≤–Ω–æ 8 —Å–∏–º–≤–æ–ª–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ Reality"

**–†–µ—à–µ–Ω–∏—è:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Public Key –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Short ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (8 —Å–∏–º–≤–æ–ª–æ–≤)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SNI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `www.microsoft.com`

### –ü—Ä–æ–±–ª–µ–º–∞: "–ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –º–µ–∂–¥—É WiFi –∏ –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç—å—é
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Ä–µ—à–µ–Ω—ã, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:
- –°–∫—Ä–∏–Ω—à–æ—Ç –æ—à–∏–±–∫–∏
- –í–µ—Ä—Å–∏—é Android
- –í–µ—Ä—Å–∏—é v2raytun
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
```

#### 3.2 –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –¥–ª—è iOS

**–§–∞–π–ª:** `/root/vpn-server/USER_GUIDE_IOS.md`

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**

```markdown
# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ VPN –Ω–∞ iOS

## üì± –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- **Shadowrocket** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **OneClick**
- **Quantumult X**

## üì• –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ Safari –Ω–∞ –≤–∞—à–µ–º iPhone/iPad
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è (Shadowrocket/OneClick)

## üîß –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Shadowrocket

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è URL –≤ Shadowrocket, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
2. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å"** –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
3. –°–µ—Ä–≤–µ—Ä –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ

### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

1. –û—Ç–∫—Ä–æ–π—Ç–µ Shadowrocket
2. –ù–∞–∂–º–∏—Ç–µ **"+"** (–¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä)
3. –í—ã–±–µ—Ä–∏—Ç–µ **"VLESS"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ URL

## ‚úÖ –®–∞–≥ 3: –ê–∫—Ç–∏–≤–∞—Ü–∏—è VPN

1. –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ —Å–ø–∏—Å–∫–µ
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø–æ–ª–æ–∂–µ–Ω–∏–µ **"–í–∫–ª"**
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
4. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è **"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ"**

## üîç –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SNI (`www.microsoft.com`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞"

**–†–µ—à–µ–Ω–∏—è:**
1. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è Reality –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Reality –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Ä–µ—à–µ–Ω—ã, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
```

#### 3.3 –°–æ–∑–¥–∞–Ω–∏–µ FAQ

**–§–∞–π–ª:** `/root/vpn-server/USER_FAQ.md`

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**

```markdown
# –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)

## üîë –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é?

–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è VLESS URL. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—Å—Ç –∫–ª—é—á –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≤–∞–º —Å—Å—ã–ª–∫—É –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

### –ß—Ç–æ —Ç–∞–∫–æ–µ VLESS URL?

VLESS URL - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPN —Å–µ—Ä–≤–µ—Ä—É. –û–Ω–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `vless://` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ.

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∫–ª—é—á –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö?

–î–∞, –æ–¥–∏–Ω –∫–ª—é—á –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –û–¥–Ω–∞–∫–æ –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —Ç—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å—Å—è.

## üì± –í–æ–ø—Ä–æ—Å—ã –ø–æ Android

### –ö–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

–î–ª—è Android —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **v2raytun**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞—à–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º.

### –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fp=chrome?

–ü–∞—Ä–∞–º–µ—Ç—Ä `fp=chrome` (fingerprint) –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å v2raytun –Ω–∞ Android. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º.

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ Short ID –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Short ID —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–æ–≤–Ω–æ 8 —Å–∏–º–≤–æ–ª–æ–≤. –ï—Å–ª–∏ –¥–ª–∏–Ω–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.

## üçé –í–æ–ø—Ä–æ—Å—ã –ø–æ iOS

### –ö–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

–î–ª—è iOS —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **Shadowrocket**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ –∏–º–µ–µ—Ç –ª—É—á—à—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É Reality –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

### –ù—É–∂–Ω–æ –ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç?

–ù–µ—Ç, –¥–ª—è Reality –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

### –ß—Ç–æ —Ç–∞–∫–æ–µ Reality –ø—Ä–æ—Ç–æ–∫–æ–ª?

Reality - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±—Ñ—É—Å–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç VPN —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ–æ—Ç–ª–∏—á–∏–º—ã–º –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ HTTPS —Ç—Ä–∞—Ñ–∏–∫–∞. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

### –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SNI?

–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SNI (`www.microsoft.com`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

### –ß—Ç–æ —Ç–∞–∫–æ–µ Short ID?

Short ID - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ Reality –ø—Ä–æ—Ç–æ–∫–æ–ª–µ. –û–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 8 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Android.

## üìä –í–æ–ø—Ä–æ—Å—ã –æ —Ç—Ä–∞—Ñ–∏–∫–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫?

–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–∞—Ñ–∏–∫–µ –≤–∞—à–µ–≥–æ –∫–ª—é—á–∞.

### –ï—Å—Ç—å –ª–∏ –ª–∏–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫–∞?

–õ–∏–º–∏—Ç—ã —Ç—Ä–∞—Ñ–∏–∫–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. –£—Ç–æ—á–Ω–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

## üîí –í–æ–ø—Ä–æ—Å—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ë–µ–∑–æ–ø–∞—Å–µ–Ω –ª–∏ VPN?

–î–∞, VPN –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

### –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–∏ –º–æ–∏ –¥–∞–Ω–Ω—ã–µ?

–ù–µ—Ç, —Å–µ—Ä–≤–µ—Ä –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–≥–∏ –≤–∞—à–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π.
```

#### 3.4 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–î–æ–±–∞–≤–∏—Ç—å –≤ API:**

```python
@app.get("/api/docs/user-guide")
async def get_user_guide(platform: str = "all"):
    """–ü–æ–ª—É—á–∏—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"""
    guides = {
        "android": {
            "title": "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ v2raytun –Ω–∞ Android",
            "file": "/root/vpn-server/USER_GUIDE_ANDROID_V2RAYTUN.md"
        },
        "ios": {
            "title": "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ VPN –Ω–∞ iOS",
            "file": "/root/vpn-server/USER_GUIDE_IOS.md"
        },
        "faq": {
            "title": "–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã",
            "file": "/root/vpn-server/USER_FAQ.md"
        }
    }
    
    if platform == "all":
        result = {}
        for key, guide in guides.items():
            try:
                with open(guide["file"], "r", encoding="utf-8") as f:
                    result[key] = {
                        "title": guide["title"],
                        "content": f.read()
                    }
            except FileNotFoundError:
                result[key] = {
                    "title": guide["title"],
                    "content": "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞"
                }
        return result
    
    if platform not in guides:
        raise HTTPException(status_code=404, detail="Platform not found")
    
    guide = guides[platform]
    try:
        with open(guide["file"], "r", encoding="utf-8") as f:
            return {
                "title": guide["title"],
                "content": f.read(),
                "platform": platform
            }
    except FileNotFoundError:
        raise HTTPException(status_code=404, detail="Documentation not found")
```

### üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
2. **–õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç** - –±—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
3. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º** - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–±–æ—Ç—ã –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
4. **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è

---

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ä—Ç–æ–≤ (1-2 —á–∞—Å–∞)

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/system/ports/usage`
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `/health` —ç–Ω–¥–ø–æ–∏–Ω—Ç
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ workers (30 –º–∏–Ω—É—Ç)

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `.env` —Ñ–∞–π–ª (VPN_WORKERS=4)
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (2-3 —á–∞—Å–∞)

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è Android
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è iOS
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å FAQ
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üéØ –ò—Ç–æ–≥–∏

–í—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å—Ä–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞:

1. **–£–ª—É—á—à–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–æ–ª–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
3. **–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞** - —É–ø—Ä–æ—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 4-6 —á–∞—Å–æ–≤  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É, –Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–∏ –ø—É–Ω–∫—Ç–∞ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π production-ready —Å–∏—Å—Ç–µ–º—ã.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 23 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0

