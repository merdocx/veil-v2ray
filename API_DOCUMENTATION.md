# VPN Key Management API - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –í–µ—Ä—Å–∏—è API: 2.3.4

### –û–±–∑–æ—Ä
API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN –∫–ª—é—á–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π VLESS+Reality –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—Ä–∞—Ñ–∏–∫–∞.

### –ë–∞–∑–æ–≤—ã–π URL
- API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞: `https://<IP_–ò–õ–ò_–î–û–ú–ï–ù>:8000`
- –î–æ–º–µ–Ω –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω. –ú–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É IP (–ø—Ä–∏–º–µ—Ä: `https://203.0.113.10:8000`). –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∞–¥—Ä–µ—Å —Å–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –¥–æ–±–∞–≤—å—Ç–µ —Ñ–ª–∞–≥ `-k/--insecure` –≤ `curl` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-API-Key`.

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- `GET /` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å–µ API
- `GET /api/` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API
- `GET /health` - Health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

---

## üîë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞
**POST** `/api/keys`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π VPN –∫–ª—é—á —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø–æ—Ä—Ç–æ–º.

**–õ–∏–º–∏—Ç:** 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "name": "user@example.com"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
    "id": "uuid-key-id",
    "name": "user@example.com",
    "uuid": "vless-uuid",
    "created_at": "2025-08-05T12:00:00.000000",
    "is_active": true,
    "port": 10001,
    "short_id": "5f9c2b7adfe7d8ab",
    "sni": "www.microsoft.com"
}
```

–ü–æ–ª–µ `short_id` –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `sid` VLESS-—Å—Å—ã–ª–∫–∏. –ü–æ–ª–µ `sni` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π SNI –¥–æ–º–µ–Ω –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö ServerNames.

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -X POST "https://SERVER_ADDRESS:8000/api/keys" \
     -H "X-API-Key: your-api-key" \
     -H "Content-Type: application/json" \
     -d '{"name": "user@example.com"}'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–ª—é—á–µ–π
**GET** `/api/keys`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö VPN –∫–ª—é—á–µ–π.

**–õ–∏–º–∏—Ç:** 30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

**–û—Ç–≤–µ—Ç:**
```json
[
    {
        "id": "uuid-key-id",
        "name": "user@example.com",
        "uuid": "vless-uuid",
        "created_at": "2025-08-05T12:00:00.000000",
        "is_active": true,
        "port": 10001,
        "short_id": "5f9c2b7adfe7d8ab",
        "sni": "www.microsoft.com"
    }
]
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
**GET** `/api/keys/{key_id}`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∫–ª—é—á–µ.

**–õ–∏–º–∏—Ç:** 60 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `key_id` - ID –∏–ª–∏ UUID –∫–ª—é—á–∞

**–û—Ç–≤–µ—Ç:**
```json
{
    "id": "uuid-key-id",
    "name": "user@example.com",
    "uuid": "vless-uuid",
    "created_at": "2025-08-05T12:00:00.000000",
    "is_active": true,
    "port": 10001,
    "short_id": "5f9c2b7adfe7d8ab",
    "sni": "www.microsoft.com"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞
**GET** `/api/keys/{key_id}/config`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç VLESS URL (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –ø–æ–ª—è—Ö `client_config` –∏ `vless_url`) –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª—é—á–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `key_id` - ID –∏–ª–∏ UUID –∫–ª—é—á–∞

**–û—Ç–≤–µ—Ç:**
```json
{
    "key": {
        "id": "uuid-key-id",
        "name": "user@example.com",
        "uuid": "vless-uuid",
        "created_at": "2025-08-05T12:00:00.000000",
        "is_active": true,
        "port": 10001,
        "short_id": "5f9c2b7adfe7d8ab",
        "sni": "www.microsoft.com"
    },
    "client_config": "vless://uuid@SERVER_ADDRESS:PORT?security=reality&sni=www.microsoft.com&fp=chrome&pbk=public-key&sid=5f9c2b7adfe7d8ab&type=tcp&flow=xtls-rprx-vision#user@example.com",
    "vless_url": "vless://uuid@SERVER_ADDRESS:PORT?security=reality&sni=www.microsoft.com&fp=chrome&pbk=public-key&sid=5f9c2b7adfe7d8ab&type=tcp&flow=xtls-rprx-vision#user@example.com",
    "short_id": "5f9c2b7adfe7d8ab"
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–∞
**DELETE** `/api/keys/{key_id}`

–£–¥–∞–ª—è–µ—Ç VPN –∫–ª—é—á –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–æ—Ä—Ç.

**–õ–∏–º–∏—Ç:** 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `key_id` - ID –∏–ª–∏ UUID –∫–ª—é—á–∞

**–û—Ç–≤–µ—Ç:**
```json
{
    "message": "Key deleted successfully"
}
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞

> **–í–∞–∂–Ω–æ:** –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞. –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ systemd timer, –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç—É –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞.

### –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–ª—é—á–∞
**GET** `/api/keys/{key_id}/traffic`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ —Å –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–±—Ä–æ—Å–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `key_id` - ID –∏–ª–∏ UUID –∫–ª—é—á–∞

**–û—Ç–≤–µ—Ç:**
```json
{
    "status": "success",
    "key_id": "uuid-key-id",
    "key_uuid": "vless-uuid",
    "total_bytes": 1234567,
    "timestamp": "2025-11-21T16:00:00"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ Xray Stats API.

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/keys/{key_id}/traffic
```

### –û–±–Ω—É–ª–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–ª—é—á–∞
**POST** `/api/keys/{key_id}/traffic/reset`

–û–±–Ω—É–ª—è–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `key_id` - ID –∏–ª–∏ UUID –∫–ª—é—á–∞

**–û—Ç–≤–µ—Ç:**
```json
{
    "status": "success",
    "message": "Traffic reset successfully",
    "key_id": "uuid-key-id",
    "key_uuid": "vless-uuid",
    "timestamp": "2025-11-21T16:00:00"
}
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl -X POST -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/keys/{key_id}/traffic/reset
```

---

## üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**POST** `/api/system/sync-config`

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xray —Å –±–∞–∑–æ–π –∫–ª—é—á–µ–π.

**–õ–∏–º–∏—Ç:** 3 –∑–∞–ø—Ä–æ—Å–∞/–º–∏–Ω—É—Ç—É

**–û—Ç–≤–µ—Ç:**
```json
{
    "message": "Configuration synchronized successfully",
    "status": "synced",
    "validation": {...},
    "timestamp": 1734883200
}
```

### –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**GET** `/api/system/config-status`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É SQLite –∏ config.json.

**–û—Ç–≤–µ—Ç:**
```json
{
    "synchronized": true,
    "keys_json_count": 25,
    "config_json_count": 25,
    "keys_json_uuids": [...],
    "config_json_uuids": [...],
    "timestamp": 1734883200
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Reality –Ω–∞—Å—Ç—Ä–æ–µ–∫
**POST** `/api/system/verify-reality`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å Reality –Ω–∞—Å—Ç—Ä–æ–µ–∫.

**–û—Ç–≤–µ—Ç:**
```json
{
    "message": "Reality settings verified and updated successfully",
    "status": "verified",
    "timestamp": 1734883200
}
```

### –°—Ç–∞—Ç—É—Å –ø–æ—Ä—Ç–æ–≤
**GET** `/api/system/ports`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
    "port_assignments": {...},
    "used_ports": 25,
    "available_ports": 75,
    "max_ports": 100,
    "port_range": "10001-10100",
    "timestamp": 1734883200
}
```

### –°–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤
**POST** `/api/system/ports/reset`

–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
    "message": "All ports reset successfully",
    "status": "reset",
    "timestamp": 1734883200
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤
**GET** `/api/system/ports/status`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
    "validation": {...},
    "timestamp": 1734883200
}
```

### –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray
**GET** `/api/system/xray/config-status`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray.

**–û—Ç–≤–µ—Ç:**
```json
{
    "config_status": {...},
    "timestamp": 1734883200
}
```

### –°–ø–∏—Å–æ–∫ inbound'–æ–≤ Xray
**GET** `/api/system/xray/inbounds`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ VLESS inbound'–∞—Ö —Å–æ–≥–ª–∞—Å–Ω–æ `config.json` (–ø–æ—Ä—Ç, UUID, shortIds).

**–û—Ç–≤–µ—Ç:**
```json
{
    "inbounds": [
        {
            "tag": "vless-inbound",
            "port": 10001,
            "client_count": 1,
            "uuids": ["vless-uuid"],
            "short_ids": ["5f9c2b7adfe7d8ab"],
            "dest": "www.microsoft.com:443",
            "server_names": ["www.microsoft.com"]
        }
    ],
    "timestamp": 1734883200,
    "source": "config.json"
}
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray
**POST** `/api/system/xray/sync-config`

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xray —Å –∫–ª—é—á–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Xray.

**–û—Ç–≤–µ—Ç:**
```json
{
    "message": "Xray configuration synchronized successfully",
    "status": "synced",
    "short_id_sync": {...},
    "timestamp": 1734883200
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Xray
**GET** `/api/system/xray/validate-sync`

–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray.

**–û—Ç–≤–µ—Ç:**
```json
{
    "validation": {...},
    "timestamp": 1734883200
}
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Reality –∫–ª—é—á–µ–π
**POST** `/api/system/fix-reality-keys`

–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç Reality –∫–ª—é—á–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Xray.

**–û—Ç–≤–µ—Ç:**
```json
{
    "status": "fixed",
    "message": "Reality keys fixed successfully",
    "timestamp": 1734883200
}
```

---

## üìù –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- **200** - –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **400** - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **401** - –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- **404** - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- **500** - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- **503** - –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, Xray Stats API)

---

## üîÑ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞
```bash
curl -X POST "https://SERVER_ADDRESS:8000/api/keys" \
     -H "X-API-Key: your-api-key" \
     -H "Content-Type: application/json" \
     -d '{"name": "user@example.com"}'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–ª—é—á–µ–π
```bash
curl -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/keys
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞
```bash
curl -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/keys/{key_id}/config
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–ª—é—á–∞
```bash
curl -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/keys/{key_id}/traffic
```

### –û–±–Ω—É–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–ª—é—á–∞
```bash
curl -X POST -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/keys/{key_id}/traffic/reset
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–∞
```bash
curl -X DELETE -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/keys/{key_id}
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
curl -X POST -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/system/sync-config
```

### –°—Ç–∞—Ç—É—Å –ø–æ—Ä—Ç–æ–≤
```bash
curl -H "X-API-Key: your-api-key" \
    https://SERVER_ADDRESS:8000/api/system/ports
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ö–ª—é—á VPN
```json
{
    "id": "string",           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–ª—é—á–∞
    "name": "string",         // –ò–º—è/email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "uuid": "string",         // UUID –¥–ª—è VLESS –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
    "created_at": "string",   // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (ISO 8601)
    "is_active": "boolean",   // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∫–ª—é—á
    "port": "integer",        // –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç
    "short_id": "string",    // –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π short_id (16 hex —Å–∏–º–≤–æ–ª–æ–≤)
    "sni": "string"          // SNI –¥–æ–º–µ–Ω –¥–ª—è Reality –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
}
```

### –¢—Ä–∞—Ñ–∏–∫
```json
{
    "status": "success",
    "key_id": "string",       // ID –∫–ª—é—á–∞
    "key_uuid": "string",     // UUID –∫–ª—é—á–∞
    "total_bytes": "integer", // –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –≤ –±–∞–π—Ç–∞—Ö
    "timestamp": "string"     // –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (ISO 8601)
}
```

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–¥—Å—á–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞
- –¢—Ä–∞—Ñ–∏–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Xray Stats API –ø–æ UUID –∫–ª—é—á–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–ª—å—Ç–∞-–ø–æ–¥—Å—á–µ—Ç –º–µ–∂–¥—É —Å–Ω–∏–º–∫–∞–º–∏ (uplink + downlink)
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ –≤ SQLite –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ systemd timer
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–∫–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç—É –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

### –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã
- –ö–∞–∂–¥—ã–π –∫–ª—é—á –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 10001-10100
- –ú–∞–∫—Å–∏–º—É–º 100 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–π
- –ü–æ—Ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–ª—é—á–∞

### Reality –ø—Ä–æ—Ç–æ–∫–æ–ª
- –ö–∞–∂–¥—ã–π –∫–ª—é—á –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π `short_id` (16 hex —Å–∏–º–≤–æ–ª–æ–≤)
- SNI –¥–æ–º–µ–Ω –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª—é—á–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö ServerNames
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ VLESS+Reality —Å XTLS-RPRX-Vision flow

---

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–∫—Ä–æ–º–µ `/`, `/api/` –∏ `/health`) —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-Key`
- Rate limiting –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º (—É–∫–∞–∑–∞–Ω–æ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏)
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 –∏–ª–∏ Unix timestamp
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ–ª–∞–≥ `-k` –≤ curl –∫–æ–º–∞–Ω–¥—ã
