# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ create_inbound_for_key()

**–î–∞—Ç–∞:** 2025-11-01  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–§—É–Ω–∫—Ü–∏—è `create_inbound_for_key()` —Å–æ–∑–¥–∞–≤–∞–ª–∞ –Ω–æ–≤—ã–µ inbound —Å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º SNI –∏ –æ–¥–Ω–∏–º shortId, —á—Ç–æ –Ω–µ –ø–æ–∑–≤–æ–ª—è–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `create_inbound_for_key()` –≤ `xray_config_manager.py`:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```python
"serverNames": ["www.microsoft.com"],  # –¢–æ–ª—å–∫–æ 1 SNI
"shortIds": [reality_keys['short_id']],  # –¢–æ–ª—å–∫–æ 1 shortId
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```python
"serverNames": [
    "www.microsoft.com",
    "www.cloudflare.com",
    "www.google.com"
],  # 3 SNI
"shortIds": [
    "2680beb40ea2fde0",
    "2bc4128aa76f2b7a",
    "c3fc1008549269da",
    "c39576010e746754"
],  # 4 shortId
```

---

## üîí –ì–∞—Ä–∞–Ω—Ç–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚úÖ –°—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã:
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ inbound –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π
- –°—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### ‚úÖ API –ù–ï –∏–∑–º–µ–Ω–µ–Ω:
- –°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
- –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –ò–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π

### ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- `generate_client_config.py` —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ SNI/shortId
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å 1 SNI (—Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏), —Ç–∞–∫ –∏ —Å 3 SNI (–Ω–æ–≤—ã–µ –∫–ª—é—á–∏)

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ù–æ–≤—ã–µ –∫–ª—é—á–∏: 1 SNI √ó 1 shortId = **1 –∫–æ–º–±–∏–Ω–∞—Ü–∏—è** ‚ùå

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ù–æ–≤—ã–µ –∫–ª—é—á–∏: 3 SNI √ó 4 shortId = **12 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π** ‚úÖ
- –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ —É–≤–µ–ª–∏—á–µ–Ω–æ –≤ 12 —Ä–∞–∑

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞ —á–µ—Ä–µ–∑ API
POST /api/keys
{
  "name": "test_user"
}

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–æ–≤—ã–π inbound —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å 3 SNI –∏ 4 shortId
# –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

